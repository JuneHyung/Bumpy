# 🐳 04_NuxtConfig

## 🤔 문제 상황

본 프로젝트는 Nuxt를 사용해보기 위해 Nuxt로 결정했지만, SSR이 필요하지는 않아 CSR로 개발을 진행하기로 하였습니다. 그렇기 때문에 SSR옵션을 꺼야하는 상황입니다.

해당 옵션에 대해 알아보며 NuxtConfig와 몇가지 주요 옵션들을 정리해볼 예정입니다.



## 🚩 해결 방안

NuxtConfig.js에서 ssr옵션 false로 설정



## 🔍 관련 Study

공식문서에서 볼 수 있는 옵션은 방대하기 때문에 몇 가지 옵션만 추려 정리하였습니다.

우선, 프로젝트 생성시 `tsconfig.json`과 `nuxt.config.ts`이 같이 생성 됩니다.

**tsconfig.json**

```json
{
  // https://nuxt.com/docs/guide/concepts/typescript
  "extends": "./.nuxt/tsconfig.json"
}

```

typescript를 사용할 때 해당 파일이 같이 생성 됩니다. 위 파일은 Nuxt에서 삽입한 확인된 별칭 또는 사용 중인 모듈을 포함하여 **프로젝트에서 권장되는 기본 Typescript 구성이 포함** 되있습니다.

내부 코드를 살펴보면, 아래처럼 기본으로 path등 필요 옵션이 설정되있습니다.

```json
// Generated by nuxi
{
  "compilerOptions": {
    ...
    "allowSyntheticDefaultImports": true,
    "paths": {
      "~": [
        ".."
      ],
      "~/*": [
        "../*"
      ],
      "@": [
        ".."
      ],
      ...
    }
  },
  "include": [
    "./nuxt.d.ts",
    "../**/*",
    "../node_modules/@nuxt/devtools/runtime",
    "../node_modules/@nuxt/telemetry/runtime",
    ".."
  ],
  "exclude": [
    "../node_modules",
    "../node_modules/nuxt/node_modules",
    "../node_modules/@nuxt/devtools/runtime/server",
    "../node_modules/@nuxt/telemetry/runtime/server",
    "../dist",
    "../.output"
  ]
}
```



NuxtConfig를 살펴보겠습니다.

```typescript
// https://nuxt.com/docs/api/configuration/nuxt-config
export default defineNuxtConfig({
  devtools: { enabled: true }
})
```

`defineNuxtConfig`를 사용하여, 객체가 포함된 함수를 내보냅니다. (import 없이 사용이 가능)

❗ 반드시 ts로 할 필요는 없지만, `.ts`로 config 구성시 오타나 실수를 방지를 할 수 있다고 권장하고 있습니다.



### 👉 Environment override

환경에 따라 재정의를 구성할 수 있습니다.

```typescript
export default defineNuxtConfig({
  $production: {
    routeRules: {
      '/**': { isr: true }
    }
  },
  $development: {
    //
  }
})
```



### 👉 alias

Object형태로 Alias 설정가능.

```
{
  "~": "/<rootDir>",
  "@": "/<rootDir>",
  "~~": "/<rootDir>",
  "@@": "/<rootDir>",
  "assets": "/<rootDir>/assets",
  "public": "/<rootDir>/public"
}
```



### 👉 app

Nuxt app Config.

**baeURL**

`NUXT_APP_BASE_URL`환경변수를 설정하여 런타임에 설정 가능.

```typescript
NUXT_APP_BASE_URL=/prefix/ node .output/server/index.mjs
```



**head**

모든 페이지의 `<head>` 기본 구성을 설정

```typescript
app: {
  head: {
    meta: [
      // <meta name="viewport" content="width=device-width, initial-scale=1">
      { name: 'viewport', content: 'width=device-width, initial-scale=1' }
    ],
    script: [
      // <script src="https://myawesome-lib.js"></script>
      { src: 'https://awesome-lib.js' }
    ],
    link: [
      // <link rel="stylesheet" href="https://myawesome-lib.css">
      { rel: 'stylesheet', href: 'https://awesome-lib.css' }
    ],
    // please note that this is an area that is likely to change
    style: [
      // <style type="text/css">:root { color: red }</style>
      { children: ':root { color: red }', type: 'text/css' }
    ],
    noscript: [
      // <noscript>JavaScript is required</noscript>
      { children: 'JavaScript is required' }
    ]
  }
}
```



### 👉 buildDir

빌드된 Nuxt파일이 배치될 디렉터리를 지정.

```typescript
export default {
  buildDir: 'nuxt-build'
}
```



### 👉 css

전역으로 설정하려는 CSS/ Module / library를 정의할 수 있습니다.

```typescript
css: [
  // Load a Node.js module directly (here it's a Sass file).
  'bulma',
  // CSS file in the project
  '@/assets/css/main.css',
  // SCSS file in the project
  '@/assets/css/main.scss'
]
```



### 👉 directory

Nuxt에서 사용되는 기본 directory구조를 custom할 수 있다.

* assets
* layouts
* middleware
* modules
* pages
* plugins
* public
* static



### 👉 srcDir

`<rootDir>` 로 들어갈 경로 설정.



### 👉 ssr

SSR로 설정할지, CSR로 설정할지 결정

❗ 이 외에도 많은 옵션들이 있으니 사용시 반드시 공식문서 참고할 것.



## 📘 참고

* [nuxt3 공식문서 - NuxtConfig](https://nuxt.com/docs/api/nuxt-config)
* [nuxt3 공식문서 - Typescript](https://nuxt.com/docs/guide/concepts/typescript)