# 🐳 05_SpringBoot Security 작성하기

## 🤔 문제 상황

이미지 파일을 처리하는 부분을 Nginx에서 처리하면 업로드 및 다운로드에 대한 제한이나

후처리가 불가능하여 백엔드에서 처리하는 것으로 변경

## 🚩 해결 방안

이미지 파일 처리를 위해 백엔드를 통해 업로드를 하고, 스프링부트 환경변수를 통해 서버의 폴더 하나를 지정

첫 업로드시에는 file 형태로 진행되지만 이후 frontend에 다시 응답해주거나 처리하는 과정에서 base64가 더 유용한 것을 확인함

업로드부터 추후 사용까지 모두 base64로 형태를 통일하여, 별도의 file 전송이 아닌 JSON으로 통신

base64는 기존 파일형식보다 조금 파일이 커지는 단점이 있지만, JSON을 활용하여 통신하므로

하나의 요청에 여러 필드와 함께 이미지를 보낼 수 있어 유용함.

단순 다운로드의 형태가 아닌 웹페이지 표시용이라면 base64가 굉장히 유용하다는 생각을 갖게 된 경험이었음

## 🔍 관련 Study

https://velog.io/@byeol4001/Base-64%EC%99%80-base64-img-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0

위 블로그에서 base64로 이미지를 인코딩하는 경우 발생하는 장단점에 대해 설명하고있다.


장점

- 서버에 이미지를 넣지 않아도 되므로 간단한 구현이 가능하다.
- 렌더시, 문서로딩과 같이 로딩되기에 끊기지 않고 불려온다.

단점

- 코딩시 가독성이 떨어진다.
- 용량이 커진다
- 256가지를 표현할 수 있는 바이트를 printable한 64가지를 사용해서 표현하니 당연하다.
다시 말해, 8비트를 6비트로 표현하는 것이다.
3개의 8비트는 4개의 6비트로 표현할 수 있다.
- 따라서 Base64 인코딩을 사용하면 원본보다 33%의 크기 증가가 발생한다.


## 📘 참고

